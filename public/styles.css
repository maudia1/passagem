:root{--bg:#0f172a;--panel:#111827;--muted:#9aa3b2;--text:#e5e7eb;--accent:#22c55e;--danger:#ef4444;--disabled:#6b7280;--outline:#1f2937;--shadow:0 12px 30px rgba(5,12,26,.35)}
*{box-sizing:border-box}
html,body{height:100%;overflow-x:hidden;touch-action:pan-y}
body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;background:#030712;color:var(--text);display:flex;flex-direction:column;overscroll-behavior-x:none;position:relative;min-height:100vh}
body::before{content:"";position:fixed;inset:0;background:radial-gradient(circle at 20% 20%,rgba(34,197,94,.18),transparent 55%),radial-gradient(circle at 80% 0,rgba(56,189,248,.14),transparent 45%),linear-gradient(180deg,#060b16,#0f172a);z-index:-1}
.topbar{position:sticky;top:0;z-index:10;padding:32px 24px 36px;border-bottom:1px solid rgba(148,163,184,.18);background:rgba(15,23,42,.82);backdrop-filter:blur(16px);display:flex;justify-content:center;overflow:hidden}
.topbar::before{content:"";position:absolute;inset:0;background:radial-gradient(circle at 8% 12%,rgba(34,197,94,.22),transparent 55%),radial-gradient(circle at 82% -10%,rgba(56,189,248,.25),transparent 50%),linear-gradient(180deg,rgba(15,23,42,.95),rgba(8,11,21,.92));pointer-events:none;opacity:.9}
.topbar::after{content:"";position:absolute;width:240px;height:240px;border-radius:50%;background:radial-gradient(circle,rgba(34,197,94,.28),transparent 65%);filter:blur(40px);right:-80px;top:-120px;pointer-events:none;opacity:.6}
.topbar-inner{position:relative;width:100%;max-width:1100px;display:grid;grid-template-columns:minmax(0,1.15fr) minmax(0,0.85fr);gap:36px;align-items:center;z-index:1}
.topbar-info{display:flex;flex-direction:column;gap:18px}
.topbar-info h1{font-size:32px;margin:0;font-weight:600;letter-spacing:.01em}
.topbar-info .muted.large{font-size:16px;line-height:1.6;max-width:520px}
.eyebrow{font-size:12px;letter-spacing:.28em;text-transform:uppercase;color:rgba(148,163,184,.8);font-weight:600}
.topbar-meta{width:100%}
.metric-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:16px}
.metric-card{background:rgba(15,23,42,.9);border:1px solid rgba(148,163,184,.2);border-radius:18px;padding:20px 20px 22px;box-shadow:0 18px 36px rgba(6,11,24,.35);display:flex;flex-direction:column;gap:12px;min-width:0}
.metric-card.accent{background:linear-gradient(180deg,rgba(34,197,94,.18),rgba(15,23,42,.95));border-color:rgba(34,197,94,.45);box-shadow:0 20px 40px rgba(34,197,94,.22)}
.metric-card.soft{background:linear-gradient(180deg,rgba(14,116,144,.22),rgba(15,23,42,.94));border-color:rgba(56,189,248,.3)}
.metric-label{font-size:12px;text-transform:uppercase;letter-spacing:.28em;color:rgba(148,163,184,.88);font-weight:600}
.metric-main{display:flex;flex-direction:column;gap:6px}
.metric-value{font-size:24px;font-weight:600;letter-spacing:.01em}
.metric-card.accent .metric-value{color:#22c55e}
.metric-card.soft .metric-value{color:#38bdf8}
.metric-sub{font-size:14px;color:var(--muted)}
.top-actions{display:flex;gap:10px;flex-wrap:wrap}
.muted{color:var(--muted);font-size:14px}
.muted.small{font-size:13px}
.reset{background:#1f2937;color:#e5e7eb;border:1px solid var(--outline);padding:8px 12px;border-radius:10px;cursor:pointer;transition:.15s transform,.15s background;min-height:44px;touch-action:manipulation}
.reset.danger{border-color:#ef4444}
.reset:hover{background:#263041}
.reset:active{transform:scale(.97)}
.content{max-width:1100px;margin:32px auto;padding:0 24px 40px;width:100%;display:grid;grid-template-columns:minmax(0,1.05fr) minmax(0,0.95fr);gap:28px;align-items:start}
.focus-panel{display:flex;flex-direction:column;gap:16px}
.info-panel{display:flex;flex-direction:column;gap:20px}
.car,.passes,.finance,.daily,.fuel{background:linear-gradient(180deg,rgba(17,24,39,.96),rgba(15,23,42,.92));border:1px solid rgba(30,41,59,.8);border-radius:20px;padding:26px;box-shadow:var(--shadow);position:relative;overflow:hidden}
.car::before,.passes::before,.finance::before,.daily::before,.fuel::before{content:"";position:absolute;inset:0;pointer-events:none;background:linear-gradient(135deg,rgba(34,197,94,.08),transparent 55%);opacity:.7}
.car>*{position:relative}
.passes>*{position:relative}
.finance>*{position:relative}
.daily>*{position:relative}
.fuel>*{position:relative}
.passes{padding:24px}
.passes h2{font-size:18px;margin:0 0 12px 0}
.finance h2{font-size:18px;margin:0 0 12px 0}
.daily h2{font-size:18px;margin:0 0 12px 0}
.daily-total{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}
.daily-list{list-style:none;margin:0;padding:0;display:grid;gap:10px}
.daily-list li{display:flex;flex-direction:column;gap:8px;background:#0f1628;border:1px solid var(--outline);border-radius:12px;padding:10px 12px}
.daily-row{display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap}
.daily-amounts{display:flex;align-items:center;gap:8px;flex-wrap:wrap}
.daily-amounts .tag{font-size:13px}
.summary-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:12px}
.summary-item{background:#0f1628;border:1px solid var(--outline);border-radius:12px;padding:10px 12px;display:flex;flex-direction:column}
.summary-item strong{font-size:16px}
.net.positive{color:#22c55e}
.net.negative{color:#ef4444}
.fuel h2{font-size:18px;margin:0}
.card-header{display:flex;align-items:flex-start;justify-content:space-between;gap:16px;margin-bottom:18px}
.link-btn{background:rgba(15,23,42,.6);color:var(--accent);border:1px solid rgba(34,197,94,.4);padding:8px 12px;border-radius:999px;font-weight:600;cursor:pointer;transition:.15s transform,.15s background;min-height:40px;align-self:flex-start;text-decoration:none}
.link-btn:hover{background:rgba(34,197,94,.08)}
.link-btn:active{transform:scale(.97)}
.fuel-stats{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:12px;margin-bottom:18px}
.fuel-stat{background:#0f1628;border:1px solid var(--outline);border-radius:14px;padding:14px 16px;display:flex;flex-direction:column;gap:8px;min-height:92px}
.fuel-stat strong{font-size:18px;letter-spacing:.01em}
.row{display:grid;gap:18px}
.row.front{grid-template-columns:repeat(auto-fit,minmax(140px,1fr));margin-bottom:22px}
.row.back{grid-template-columns:repeat(auto-fit,minmax(120px,1fr))}
.seat{appearance:none;border:0;border-radius:18px;padding:clamp(22px,3.6vw,32px) 0;font-size:clamp(18px,4.4vw,24px);font-weight:600;cursor:pointer;transition:.15s transform,.15s filter;position:relative;box-shadow:inset 0 -2px 0 rgba(0,0,0,.25),0 6px 18px rgba(0,0,0,.28);outline:2px solid transparent;outline-offset:2px;min-height:clamp(90px,16vw,132px);touch-action:manipulation}
.seat.unpaid{background:linear-gradient(180deg,#ef4444,#b91c1c);color:#fff}
.seat.paid{background:linear-gradient(180deg,#22c55e,#16a34a);color:#073b16}
.seat.paid::after{content:attr(data-label);position:absolute;right:8px;bottom:8px;background:rgba(0,0,0,.15);color:#fff;border-radius:999px;padding:2px 8px;font-size:11px;letter-spacing:.3px}
.seat:active{transform:scale(.98)}
.seat.driver{background:linear-gradient(180deg,#6b7280,#4b5563);color:#0a0a0a;cursor:not-allowed;box-shadow:inset 0 -2px 0 rgba(0,0,0,.35)}
.seat:focus-visible{outline-color:#60a5fa}
.legend{display:flex;align-items:center;gap:14px;color:var(--muted);margin:0 4px 0;flex-wrap:wrap}
.dot{display:inline-block;width:12px;height:12px;border-radius:50%;margin-right:6px;vertical-align:middle}
.dot.paid{background:#22c55e}
.dot.unpaid{background:#ef4444}
.footer{color:var(--muted);text-align:center;padding:20px}

@media (max-width:1024px){
  .content{grid-template-columns:1fr;gap:24px}
  .topbar{padding:28px 20px 32px}
  .topbar-inner{grid-template-columns:1fr;gap:28px}
  .topbar-info{align-items:flex-start}
  .metric-grid{grid-template-columns:repeat(auto-fit,minmax(160px,1fr))}
}

@media (max-width:720px){
  .content{padding:0 16px;gap:20px}
  .info-panel{gap:18px}
  .topbar-info h1{font-size:28px}
  .topbar-info .muted.large{font-size:15px}
  .car{padding:24px 18px}
  .row{gap:16px}
  .row.front{grid-template-columns:repeat(2,minmax(0,1fr))}
  .row.back{grid-template-columns:repeat(2,minmax(0,1fr))}
  .legend{justify-content:center}
  .summary-grid{grid-template-columns:repeat(auto-fit,minmax(140px,1fr))}
  .fuel-stats{grid-template-columns:repeat(auto-fit,minmax(160px,1fr))}
}

@media (max-width:480px){
  .car{padding:22px 16px}
  .row.front{grid-template-columns:1fr}
  .row.back{grid-template-columns:1fr}
  .fuel-grid{grid-template-columns:1fr}
  .fuel-edit{grid-template-columns:1fr}
  .fuel-edit .row2{grid-template-columns:1fr}
  .topbar{padding:24px 16px 30px}
  .topbar-inner{gap:22px}
  .metric-grid{grid-template-columns:1fr}
}

/* Bottom sheet */
.backdrop{position:fixed;inset:0;background:rgba(0,0,0,.4);opacity:0;pointer-events:none;transition:opacity .2s ease;z-index:100}
.sheet{position:fixed;left:0;right:0;bottom:0;transform:translateY(100%);background:#0f1628;border-top-left-radius:16px;border-top-right-radius:16px;border:1px solid var(--outline);box-shadow:0 -10px 30px rgba(0,0,0,.35);padding:16px 16px calc(20px + env(safe-area-inset-bottom));transition:transform .25s ease,opacity .2s ease;z-index:101}
.sheet h2{font-size:16px;margin:8px 4px 14px}
.sheet-actions{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:8px}
.action{padding:14px 12px;border-radius:12px;border:1px solid var(--outline);background:#111827;color:var(--text);font-weight:600;cursor:pointer;min-height:48px;touch-action:manipulation}
.action.pix{border-color:#22c55e}
.action.cash{border-color:#22c55e}
.action.pending{border-color:#ef4444}
.sheet-cancel{width:100%;padding:12px;border-radius:12px;border:1px solid var(--outline);background:#0d1424;color:var(--text);cursor:pointer;min-height:48px;touch-action:manipulation}
.sheet-handle{width:44px;height:5px;border-radius:999px;background:#243046;margin:4px auto 8px}
.sheet.open{transform:translateY(0)}
.backdrop.open{opacity:1;pointer-events:auto}
.hidden{display:none}

/* Fuel form */
.fuel-form{margin-top:6px}
.fuel-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:12px}
.fuel-grid .full{grid-column:1 / -1}
.fuel-form label{display:flex;flex-direction:column;gap:6px;color:var(--muted);font-size:14px}
.fuel-form input,.fuel-form select{appearance:none;background:#0f1628;border:1px solid var(--outline);border-radius:10px;color:var(--text);padding:12px 14px;min-height:44px;font-size:16px}
.fuel-actions{margin-top:10px;display:flex;justify-content:flex-end}
.action.save{border-color:#22c55e}

.fuel-history{margin-top:20px;border-top:1px solid rgba(30,41,59,.6);padding-top:16px;display:flex;flex-direction:column;gap:12px}
.fuel-history-header{display:flex;flex-direction:column;gap:4px}
.fuel-history-header h3{margin:0;font-size:16px}
.fuel-items{list-style:none;margin:0;padding:0;display:grid;gap:10px}
.fuel-items li{display:flex;justify-content:space-between;align-items:center;background:#0f1628;border:1px solid var(--outline);border-radius:10px;padding:10px 12px}
.fuel-item-left{display:flex;flex-direction:column}
.fuel-item-right{display:flex;gap:12px;align-items:center}
.tag{display:inline-block;background:#111827;border:1px solid var(--outline);border-radius:999px;padding:2px 8px;font-size:12px;color:var(--text)}
.btn-text{background:transparent;border:1px solid var(--outline);border-radius:8px;color:var(--text);padding:6px 10px;cursor:pointer;font-size:12px;min-height:36px;touch-action:manipulation}
.btn-text:hover{background:#111827}
.fuel-edit{display:grid;grid-template-columns:1.2fr 1fr 1fr 1fr;gap:8px;width:100%}
.fuel-edit .row2{grid-column:1 / -1;display:grid;grid-template-columns:1fr 1fr;gap:8px}
.fuel-edit input,.fuel-edit select{appearance:none;background:#0f1628;border:1px solid var(--outline);border-radius:8px;color:var(--text);padding:8px 10px;font-size:16px}
.fuel-edit .actions{display:flex;gap:8px;justify-content:flex-end;grid-column:1 / -1}

@media (max-width:900px){
  .fuel-grid{grid-template-columns:repeat(2,1fr)}
  .fuel-edit{grid-template-columns:1fr 1fr}
  .fuel-edit .row2{grid-template-columns:1fr}
}
